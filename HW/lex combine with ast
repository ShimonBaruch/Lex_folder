%{
#include "y.tab.h"
%}

%option noyywrap

%%
"bool"      { return BOOL; }
"char"      { return CHAR; }
"int"       { return INT; }
"double"    { return DOUBLE; }
"float"     { return FLOAT; }
"string"    { return STRING; }
"int\*"     { return INT_PTR; }
"char\*"    { return CHAR_PTR; }
"double\*"  { return DOUBLE_PTR; }
"float\*"   { return FLOAT_PTR; }
"if"        { return IF; }
"else"      { return ELSE; }
"while"     { return WHILE; }
"for"       { return FOR; }
"var"       { return VAR; }
"args>>"    { return ARGS; }
"public"    { return PUBLIC; }
"private"   { return PRIVATE; }
"static"    { return STATIC; }
"return"    { return RETURN; }
"null"      { return NULLPTR; }
"void"      { return VOID; }
"do"        { return DO; }

"&&"        { return AND; }
"||"        { return OR; }
"=="        { return EQ; }
"!="        { return NE; }
"<="        { return LE; }
">="        { return GE; }
"<"         { return LT; }
">"         { return GT; }
"+"         { return PLUS; }
"-"         { return MINUS; }
"*"         { return TIMES; }
"/"         { return DIVIDE; }
"!"         { return NOT; }
"&"         { return ADDR; }
"<-"        { return ASSIGN; }

[0-9]+      { yylval.ival = atoi(yytext); return INT_LIT; }
\"([^\\\"]|\\.)*\"   { yylval.sval = strdup(yytext); return STRING_LIT; }
\'[^\']\'   { yylval.cval = yytext[1]; return CHAR_LIT; }

[0-9]+ {yylval = mknode(yytext,NULL,NULL);return NUM;}
[a-zA-z][a-zA-Z0-9]* {yylval = mknode(yytext,NULL,NULL);return ID;}
[\t ] ;
. {yylval = mknode(yytext,NULL,NULL);return yytext[0];}

[a-zA-Z_][a-zA-Z0-9_]* { yylval.sval = strdup(yytext); return ID; }

";"         { return SEMICOLON; }
","         { return COMMA; }
"{"         { return LBRACE; }
"}"         { return RBRACE; }
"("         { return LPAREN; }
")"         { return RPAREN; }
"["         { return LBRACKET; }
"]"         { return RBRACKET; }

[ \t\n\r]+  { /* ignore whitespace */ }

.           { printf("Unknown character: %s\n", yytext); exit(1); }
%%

int yywrap() {
    return 1;
}
